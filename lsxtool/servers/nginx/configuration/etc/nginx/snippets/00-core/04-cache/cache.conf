# Configuración de caché para Nginx

# Configuración de caché de archivos
open_file_cache max=1000 inactive=20s;
open_file_cache_valid 30s;
open_file_cache_min_uses 2;
open_file_cache_errors on;

# Configuración de caché de proxy
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=cache:10m max_size=100m inactive=60m;
proxy_cache_key "$scheme$request_method$host$request_uri";
proxy_cache_valid 200 302 10m;
proxy_cache_valid 404 1m;
proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;
proxy_cache_lock on;

# Configuración de caché para archivos estáticos
location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    access_log off;
}

# Configuración de caché para archivos de texto
location ~* \.(txt|xml|json)$ {
    expires 1d;
    add_header Cache-Control "public";
}

# Configuración de caché para archivos de video
location ~* \.(mp4|avi|mov|wmv|flv|mkv)$ {
    expires 7d;
    add_header Cache-Control "public";
}
