# Configuraci칩n para qa-cluster-1.yucatan.gob.mx - Frontend Next.js
# Traefik enruta a Nginx en puerto 9100
# Next.js: /mnt/d/www/01-STIC/web/00-CORE/cluster-1-front

server {
    listen 9100;
    server_name qa-cluster-1.yucatan.gob.mx;

    # Root para archivos HTML est치ticos de Next.js (generados en build)
    root /mnt/d/www/01-STIC/web/00-CORE/cluster-1-front/.next/server/app;
    index index.html;

    # Logs
    access_log /var/log/nginx/qa-cluster-1-access.log;
    error_log /var/log/nginx/qa-cluster-1-error.log;

    # Deshabilitar listado de directorios
    autoindex off;

    # Tama침o m치ximo de carga (para uploads)
    client_max_body_size 100M;

    # Secciones modularizadas por funcionalidad
    include /etc/nginx/conf.d/stic/snippets/qa-cluster-1.yucatan.gob.mx.laravel.conf;
    include /etc/nginx/conf.d/stic/snippets/qa-cluster-1.yucatan.gob.mx.swagger.conf;
    include /etc/nginx/conf.d/stic/snippets/qa-cluster-1.yucatan.gob.mx.next.conf;

    # Denegar acceso a archivos sensibles
    location ~ /\.(env|git|next|node_modules) {
        deny all;
        return 404;
    }
}

